!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},i={}.hasOwnProperty,a=/^\.\.?(\/|$)/,s=function(e,t){for(var n,r=[],i=(a.test(t)?e+"/"+t:t).split("/"),s=0,o=i.length;s<o;s++)n=i[s],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},o=function(e){return e.split("/").slice(0,-1).join("/")},l=function(t){return function(n){var r=s(o(t),n);return e.require(r,t)}},u=function(e,t){var r=g&&g.createHot(e),i={id:e,exports:{},hot:r};return n[e]=i,t(i.exports,l(e),i),i.exports},c=function(e){return r[e]?c(r[e]):e},d=function(e,t){return c(s(o(e),t))},f=function(e,r){null==r&&(r="/");var a=c(e);if(i.call(n,a))return n[a].exports;if(i.call(t,a))return u(a,t[a]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};f.alias=function(e,t){r[t]=e};var h=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,_=function(e){if(h.test(e)){var t=e.replace(h,"");i.call(r,t)&&r[t].replace(h,"")!==t+"/index"||(r[t]=e)}if(p.test(e)){var n=e.replace(p,"");i.call(r,n)||(r[n]=e)}};f.register=f.define=function(e,r){if(e&&"object"==typeof e)for(var a in e)i.call(e,a)&&f.register(a,e[a]);else t[e]=r,delete n[e],_(e)},f.list=function(){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};var g=e._hmr&&new e._hmr(d,f,t,n);f._cache=n,f.hmr=g&&g.wrap,f.brunch=!0,e.require=f}}(),function(){"undefined"==typeof window?this:window;require.register("App.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t("hud"),o=r(s),l=t("utils"),u=t("./scenes/scene_manager"),c=r(u),d=t("./scenes/MainMenuScene"),f=r(d),h=t("./scenes/PrefaceScene"),p=r(h),_=t("./scenes/EmilScene"),g=r(_),m=t("./scenes/TreehouseGameScene"),b=r(m),y=t("./scenes/EmmaScene"),v=r(y),w=t("./scenes/ShopGameScene"),k=r(w),x=t("./scenes/PapaScene"),C=r(x),O=t("./scenes/OfficeGameScene"),j=r(O),P=t("./scenes/KarlScene"),S=r(P),E=t("./scenes/EggGameScene"),z=r(E);n.exports=function(){function e(){i(this,e);var t=this.create_app_element();this.app_element=t,this.initialize_resize_listener(),t.appendChild(c["default"].get_scene_element()),t.appendChild(o["default"].init()),c["default"].register("main_menu",new f["default"]),c["default"].register("preface",new p["default"]("in")),c["default"].register("emil",new g["default"]("in")),c["default"].register("emma",new v["default"]("in")),c["default"].register("treehouse_game",new b["default"]),c["default"].register("shop_game",new k["default"]),c["default"].register("papa",new C["default"]),c["default"].register("office_game",new j["default"]),c["default"].register("karl",new S["default"]),c["default"].register("egg_game",new z["default"]);try{c["default"].navigate(location.search.substr(1))}catch(n){c["default"].navigate("main_menu")}console.log("initialized")}return a(e,[{key:"create_app_element",value:function(){var e=(0,l.create_element)("div")["class"]("app").render();return document.body.appendChild(e),e}},{key:"initialize_resize_listener",value:function(){this.resize_timeout_throttle=!1,this.resize_timeout_id=null,window.addEventListener("resize",this.resize_listener.bind(this)),this.resize_listener()}},{key:"resize_listener",value:function(e){var t=this;this.resize_timeout_throttle||(this.resize_timeout_throttle=!0,setTimeout(function(e){return t.resize_timeout_throttle=!1},500),clearTimeout(this.resize_timeout_id),this.resize_timeout_id=setTimeout(this.resize_app.bind(this),750))}},{key:"resize_app",value:function(){this.resize_timeout_id=null;var e=this.app_element,t=window.innerWidth,n=window.innerHeight,r=t/16*9;if(r<n)e.style.height=r+"px",e.style.width="100%",e.style.top=(n-r)/2+"px",e.style.left="";else{var i=n/9*16;e.style.height="100%",e.style.width=i+"px",e.style.top="",e.style.left=(t-i)/2+"px"}e.style.fontSize=e.getBoundingClientRect().height/100+"px"}}]),e}()}),require.register("hud.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){return(0,u.create_element)("img").attr("src","img/home_button.png")["class"]("hud_mainmenu").click(function(e){d["default"].navigate("main_menu")}).render()}function a(){return(0,u.create_element)("div")["class"]("hud_bag_box").adopt(s()).adopt(o()).render()}function s(){var e=(0,u.create_element)("img").attr("src","img/flashlight.png")["class"]("bag_item").render(),t=(0,u.create_element)("img").attr("src","img/catfood.png")["class"]("bag_item").render();return(0,u.create_element)("div")["class"]("hud_bag").adopt(e).adopt(t).render()}function o(){return(0,u.create_element)("img").attr("src","img/bag_button.png")["class"]("hud_bag_button").render()}function l(){return(0,u.create_element)("div")["class"]("hud").adopt(i()).adopt(a()).render()}var u=t("utils"),c=t("./scenes/scene_manager"),d=r(c);n.exports={init:l}}),require.register("initialize.js",function(e,t,n){"use strict";document.addEventListener("DOMContentLoaded",function(){var e=t("App");new e})}),require.register("scenes/Dialog.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t("../utils"),s=function(){function e(t,n){r(this,e),this.remaining_time=n,this.callable=t,this.__run(n)}return i(e,[{key:"__run",value:function(e){var t=this;t.target_time=e+ +new Date,t.timeout=setTimeout(function(){t.state="completed",t.remaining_time=0,t.callable()},e),t.state="running"}},{key:"pause",value:function(){clearInterval(this.timeout),"running"==this.state&&(this.remaining_time=this.target_time-+new Date,this.remaining_time<1?this.state="cancelled":this.state="paused")}},{key:"resume",value:function(){"paused"==this.state&&this.__run(this.remaining_time)}},{key:"cancel",value:function(){clearInterval(this.timeout),"completed"!==this.state&&(this.state="cancelled",this.remaining_time=0)}},{key:"toString",value:function(){return"Timeout "+this.state+"; "+this.remaining_time+" remaining"}},{key:"toSource",value:function(){return this.toString()+"; "+this.callable.toSource()}}]),e}(),o=function(){function e(){r(this,e),this.bubbles={},this.items=[],this.current=0,this.timeout=void 0,this.draft=void 0}return i(e,[{key:"add_bubble",value:function(e){var t=(0,a.create_element)("div")["class"]("dialog_bubble")["class"]("dialog_bubble_"+e).click(this.next.bind(this)).render();return this.bubbles[e]=t,t}},{key:"process_draft",value:function(){void 0!=this.draft&&("text"==this.draft.type?this.add_text.apply(this,this.draft.args):this.add_callable.apply(this,this.draft.args),this.draft=void 0)}},{key:"let",value:function(e){return this.process_draft(),this.draft={type:"text",args:[e,"",0]},this}},{key:"say",value:function(e){if(void 0==this.draft)throw"Who shall say that?! Give me a name via let() first";if("text"!=this.draft.type)throw"A function cannot say anything";return this.draft.args[1]=e,this}},{key:"do",value:function(e){return this.process_draft(),this.draft={type:"func",args:[e,null,0]},this}},{key:"wait",value:function(e){if(void 0==this.draft)throw"Nothing to do for that amount of time";return this.draft.args[2]=e,this}},{key:"then",value:function(e){if(void 0==this.draft)throw"No draft to append this exit function to";if("func"!=this.draft.type)throw"Cannot append exit function to text item";return this.draft.args[1]=e,this}},{key:"add",value:function(){var e=arguments.length;return 2==e&&(0,a.check_args)(arguments,"function","number")?this.add_callable.call(this,arguments[0],null,arguments[1]):3==e&&(0,a.check_args)(arguments,"function","function","number")?this.add_callable.apply(this,arguments):3==e&&(0,a.check_args)(arguments,"string","string","number")?this.add_text.apply(this,arguments):console.error("Cannot identify parameters",arguments),this}},{key:"add_text",value:function(e,t,n){var r=this;e in this.bubbles?!function(){var i=r.bubbles[e],a=function(){i.classList.add("dialog_bubble_visible"),i.textContent=t},s=function(){i.classList.remove("dialog_bubble_visible"),i.textContent=""};r.add_callable(a,s,n)}():console.warn("cannot add text, since speaker "+e+" has no bubble")}},{key:"create_speaker_function",value:function(e,t){return function(){e.textContent=t}}},{key:"add_callable",value:function(e,t,n){this.items.push({callable:e,time:n}),null!==t&&this.items.push({callable:t,time:0})}},{key:"play",value:function(){this.process_draft();var e=this.items[this.current];return void 0!==e&&(e.callable(),this.timeout=new s(this.play.bind(this),e.time),this.current=this.current+1),this}},{key:"pause",value:function(){return this.timeout.pause(),this}},{key:"resume",value:function(){return this.timeout.resume(),this}},{key:"rewind",value:function(){var e=this.timeout.state;return this.timeout.cancel(),this.current=0,"playing"==e&&this.play(),this}},{key:"prev",value:function(){return this.current=Math.max(0,this.current-2),this}},{key:"next",value:function(){return this.timeout.cancel(),this.play(),this}},{key:"stop",value:function(){return this.timeout.cancel(),this}}]),e}();e["default"]=o}),require.register("scenes/EggGameScene.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("interactjs"),c=r(u),d=t("../utils"),f=t("./Scene"),h=r(f),p=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(e){e.classList.add("egg_game"),e.appendChild(this.create_message_box()),e.appendChild(this.create_egg_box());var t=this.create_egg_source("brown");this.create_egg(t),e.appendChild(t);var n=this.create_egg_source("white");this.create_egg(n),e.appendChild(n),this.shuffle_problems(),this.next_problem()}},{key:"shuffle_problems",value:function(){this.problems=(0,d.shuffle)((0,d.range)(7))}},{key:"next_problem",value:function(e){if(this.problems.length>0){var t=this.problems.pop(),n=6-t;return this.problem=[t,n],this.problem_field.textContent=t+" + "+n+" = 6",!0}return this.problem=void 0,this.problem_field.textContent="",this.show_message("Sehr gut! Du hast alle Aufgaben gelöst!"),!1}},{key:"create_message_box",value:function(){var e=(0,d.create_element)("div")["class"]("message_box").render();return this.message_box=e,e}},{key:"show_message",value:function(e){var t=this.message_box;t.textContent=e,t.classList.add("active"),clearTimeout(this.message_box_timeout),this.message_box_timeout=setTimeout(function(){t.classList.remove("active")},3e3)}},{key:"check_finish",value:function(){var e=this,t=o(e.problem,2),n=t[0],r=t[1],i=e.dimples.reduce(function(e,t){return t.childElementCount>0&&(e[t.firstChild.getAttribute("data-color")]+=1),e},{white:0,brown:0}),a=i.brown,s=i.white;a+s>=6&&(n==a&&r==s||n==s&&r==a?(e.freeze=!0,e.show_message("Richtig!"),setTimeout(function(){e.clear_dimples(),e.next_problem()&&(e.freeze=!1)},3e3)):e.show_message("Leider falsch. Schau nochmal genau hin!"))}},{key:"create_egg_box",value:function(){var e=this,t=(0,d.create_element)("div")["class"]("egg_box").adopt(this.create_problem_field());return this.dimples=[],(0,d.range)(6).forEach(function(n){var r=e.create_dimple(n);t.adopt(r),e.dimples.push(r)}),t.render()}},{key:"clear_dimples",value:function(){this.dimples.forEach(function(e){return e.removeChild(e.firstChild)})}},{key:"create_problem_field",value:function(){return this.problem_field=(0,d.create_element)("div")["class"]("problem_field").render(),this.problem_field}},{key:"create_dimple",value:function(e){var t=this,n=(0,d.create_element)("div")["class"]("egg_dimple")["class"]("egg_dimple_"+e).render();return(0,c["default"])(n).dropzone({overlap:.25,ondragenter:function(e){t.freeze||e.target.classList.add("drop-target")},ondragleave:function(e){t.freeze||e.target.classList.remove("drop-target")},ondropdeactivate:function(e){t.freeze||e.target.classList.remove("drop-target")}}),n}},{key:"create_egg_source",value:function(e){return(0,d.create_element)("div")["class"]("egg_source")["class"]("egg_source_"+e)["class"]("egg")["class"](e+"_egg").attr("data-color",e).render()}},{key:"create_egg",value:function(e){var t=this,n=e.getAttribute("data-color"),r=(0,d.create_element)("div")["class"]("egg")["class"]("egg_draggable")["class"](n+"_egg").attr("data-color",n).render();(0,c["default"])(r).draggable({onstart:function(e){t.freeze||e.target.classList.remove("egg_in_box")},onmove:function(e){if(!t.freeze){var n=e.target,r=(parseFloat(n.getAttribute("data-x"))||0)+e.dx,i=(parseFloat(n.getAttribute("data-y"))||0)+e.dy;n.style.transform="translate("+r+"px, "+i+"px)",n.setAttribute("data-x",r),n.setAttribute("data-y",i)}},onend:function(n){if(!t.freeze){var r=n.target,i=n.interaction.dropElement;null==i?r.parentNode.removeChild(r):(r.removeAttribute("data-x"),r.removeAttribute("data-y"),r.style.removeProperty("transform"),r.classList.add("egg_in_box"),(0,d.to_array)(i.childNodes).forEach(function(e){i.removeChild(e)}),i.appendChild(r)),t.create_egg(e),t.check_finish()}}}).styleCursor(!1),e.appendChild(r)}},{key:"cleanup",value:function(e){}}]),t}(h["default"]);e["default"]=p}),require.register("scenes/EmilScene.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(t("../utils"),t("./scene_manager")),u=(r(l),t("./Scene")),c=r(u),d=t("./Dialog"),f=r(d),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.part=e||"in",n}return s(t,e),o(t,[{key:"render",value:function(e){this.scene=e,e.classList.add("emil"),"in"==this.part?(this.create_in_dialog(),this.set_background("01")):(this.create_out_dialog(),this.set_background("03")),window.scene=this}},{key:"dialog_init",value:function(){return this.dialog=new f["default"],this.scene.appendChild(this.dialog.add_bubble("emil")),this.scene.appendChild(this.dialog.add_bubble("finn")),this.dialog}},{key:"create_in_dialog",value:function(){var e=this;e.dialog_init()["let"]("finn").say("Hallo Emil! Was machst du da?").wait(3e3)["let"]("emil").say("Hallo Finn! Ich baue mir ein Baumhaus. Der Boden ist schon fertig!").wait(4e3)["let"]("finn").say("Wow, das sieht schon gut aus! Sag mal, hast du Lucy gesehen?").wait(4e3)["let"]("emil").say("Nein, heute noch nicht. Ist sie denn weg?").wait(3e3)["let"]("finn").say("Ja, ich war vorhin mit ihr im Garten und während ich kurz im Haus war, ist sie verschwunden.").wait(5e3)["let"]("emil").say("Oh nein, hoffentlich findest du sie bald wieder. In meinem Werkzeugkoffer ist eine Taschenlampe. Ich leihe sie dir gerne aus, dann kannst du Lucy auch finden, wenn sie sich irgendwo versteckt hat.").wait(1e4)["do"](function(){e.set_background("02")}).wait(1e3)["let"]("finn").say("Vielen Dank, ich werde gut darauf aufpassen!").wait(3e3)["let"]("emil").say("Finn, kannst du mir kurz helfen? Ich muss diese Bretter festnageln, aber die Nägel sind in meinem Werkzeugkoffer. Kannst du sie mir geben?").wait(7e3)["let"]("finn").say("Klar, ich helfe dir gerne! Wieviele Nägel brauchst du?").wait(4e3).play()}},{key:"create_out_dialog",value:function(){this.dialog_init()["let"]("emil").say("Super, vielen Dank! Du warst mir eine große Hilfe!").wait(3500)["let"]("finn").say("Gern geschehen! Ich muss jetzt weiter, damit ich Lucy bald wieder finde!").wait(4e3)["let"]("emil").say("Okay, viel Glück!").wait(2500).play()}},{key:"set_background",value:function(e){this.scene.style.setProperty("background-image","url(img/emil_scene_"+e+".png)")}},{key:"cleanup",value:function(e){this.dialog.stop().rewind()}}]),t}(c["default"]);e["default"]=h}),require.register("scenes/EmmaScene.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(t("../utils"),t("./scene_manager")),u=(r(l),t("./Scene")),c=r(u),d=t("./Dialog"),f=r(d),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.part=e||"in",n}return s(t,e),o(t,[{key:"render",value:function(e){this.scene=e,e.classList.add("emma"),"in"==this.part?(this.create_in_dialog(),this.set_background("01")):(this.create_out_dialog(),this.set_background("03")),window.scene=this}},{key:"dialog_init",value:function(){return this.dialog=new f["default"],this.scene.appendChild(this.dialog.add_bubble("emma")),this.scene.appendChild(this.dialog.add_bubble("finn")),this.dialog}},{key:"create_in_dialog",value:function(){this.dialog_init()["let"]("emma").say("Hallo Finn! Das ist aber schön, dass du vorbeischaust! Möchtest du mir beim Wiegen helfen?").wait(6e3)["let"]("finn").say("Oh ja, das mach ich gerne!").wait(3e3).play()}},{key:"create_out_dialog",value:function(){var e=this;e.dialog_init()["let"]("emma").say("Vielen Dank, Finn! Das hast du super gemacht!").wait(3e3)["let"]("finn").say("Danke, es hat mir viel Spaß gemacht! Jetzt muss ich aber weiter. Ich bin auf der Suche nach Lucy, sie ist mir weggelaufen.").wait(8e3)["let"]("emma").say("Hier, ich gebe dir noch ein paar Katzenleckerlis mit, dann kannst du Lucy aus ihrem Versteck locken. Viel Glück bei deiner Suche!").wait(8e3)["do"](function(){e.set_background("02")}).wait(1e3)["let"]("finn").say("Danke!").wait(2e3).play()}},{key:"set_background",value:function(e){this.scene.style.setProperty("background-image","url(img/emma_scene_"+e+".png)")}},{key:"cleanup",value:function(e){this.dialog&&this.dialog.stop().rewind()}}]),t}(c["default"]);e["default"]=h}),require.register("scenes/KarlScene.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(t("../utils"),t("./scene_manager")),u=(r(l),t("./Scene")),c=r(u),d=t("./Dialog"),f=r(d),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.part=e||"in",n}return s(t,e),o(t,[{key:"render",value:function(e){this.scene=e,e.classList.add("karl"),"in"==this.part?(this.create_in_dialog(),this.set_background("01")):"mid"==this.parte?(this.create_mid_dialog(),this.set_background("02")):(this.create_out_dialog(),this.set_background("03")),window.scene=this}},{key:"dialog_init",value:function(){return this.dialog=new f["default"],this.scene.appendChild(this.dialog.add_bubble("karl")),this.scene.appendChild(this.dialog.add_bubble("finn")),this.dialog}},{key:"create_in_dialog",value:function(){this.dialog_init()["let"]("karl").say("Hallo Finn! Na, magst du mir wieder beim Eier einpacken helfen?").wait(6e4)["let"]("finn").say("Hallo Karl! Sehr gerne!").wait(2e3).play()}},{key:"create_mid_dialog",value:function(){var e=this;e.dialog_init()["let"]("karl").say("Gute Arbeit, Finn! Dann kann ich morgen früh direkt auf den Markt fahren und die Eier verkaufen!").wait(6e3)["let"]("finn").say("Danke, das hab ich gern gemacht! Sag mal Karl, hast du vielleicht Lucy gesehen?").wait(5e3)["let"]("karl").say("Lass mal überlegen…").wait(3e3)["let"]("karl").say("Nein, aber ich war auch den ganzen Tag mit dem Traktor auf dem Feld. Aber sieh doch mal in der Scheune nach. Da war sie ja schon öfters.").wait(6e3).play()}},{key:"create_out_dialog",value:function(){var e=this;e.dialog_init()["let"]("finn").say("Schau mal, Karl! ich habe Lucy wieder gefunden!").wait(4e3)["let"]("karl").say("Das freut mich! Ich hab mir doch gleich gedacht, dass sie sich wieder in der Scheune versteckt haben wird!").wait(6e3)["let"]("finn").say("Danke, dass du mir geholfen hast! Wenn du Lust hast, komm mich wieder besuchen und wir können wieder Emma im Laden helfen oder Papas Ordner einsortieren!").wait(1e4).play()}},{key:"set_background",value:function(e){this.scene.style.setProperty("background-image","url(img/papa_scene_"+e+".png)")}},{key:"cleanup",value:function(e){this.dialog&&this.dialog.stop().rewind()}}]),t}(c["default"]);e["default"]=h}),require.register("scenes/MainMenuScene.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=t("../utils"),u=t("./scene_manager"),c=r(u),d=t("./Scene"),f=r(d),h=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"render",value:function(e){e.classList.add("main_menu"),e.appendChild(this.create_menu_button("Eingangsszene","preface")),e.appendChild(this.create_menu_button("Bei Emil","emil")),e.appendChild(this.create_menu_button("TreeHouse Game","treehouse_game")),e.appendChild(this.create_menu_button("Bei Emma","emma")),e.appendChild(this.create_menu_button("Shop Game","shop_game")),e.appendChild(this.create_menu_button("Bei Papa","papa")),e.appendChild(this.create_menu_button("Office Game","office_game")),e.appendChild(this.create_menu_button("Bei Karl","karl")),e.appendChild(this.create_menu_button("Egg Game","egg_game")),e.appendChild(this.create_button_placeholder("In der Scheune"))}},{key:"create_button_placeholder",value:function(e){return(0,l.create_element)("div")["class"]("button_placeholder").text(e).render()}},{key:"create_menu_button",value:function(e,t){return(0,l.create_element)("div")["class"]("menu_button").click(function(e){return c["default"].navigate(t)}).text(e).render()}},{key:"cleanup",value:function(e){}}]),t}(f["default"]);e["default"]=h}),require.register("scenes/OfficeGameScene.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=t("interactjs"),u=r(l),c=t("../utils"),d=t("./Scene"),f=r(d),h=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"render",value:function(e){var t=this;e.classList.add("office_game");var n=["blue","green","red"],r=[];(0,c.range)(4).map(function(i){var a=(0,c.create_element)("div")["class"]("shelf")["class"]("shelf"+i).render();if(i<3){var s=t.fill_shelf_with_folders(a,n[i],3);r=r.concat(s)}else t.fill_shelf_with_folders(a,"yellow",0);return e.appendChild(a),a}),t.messageBox=(0,c.create_element)("div")["class"]("message_box").render(),e.appendChild(t.messageBox),t.dragContainer=(0,c.create_element)("div")["class"]("drag_container").render(),(0,c.shuffle)(r).forEach(function(e){var n=e.color,r=e.number,i=e.drop_target,a=t.create_draggable_folder(n,r,i);t.dragContainer.appendChild(a)}),e.appendChild((0,c.create_element)("div")["class"]("drag_shadow").adopt(t.dragContainer).render()),t.showMessage("Sortiere die Ordner nach Farbe und Nummer ins Regal!"),(0,u["default"])(".draggable_folder").draggable({onstart:function(e){e.target.style.zIndex=1},onmove:function(e){var t=e.target,n=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,r=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.transform="translate("+n+"px, "+r+"px)",t.setAttribute("data-x",n),t.setAttribute("data-y",r)},onend:function(e){if(e.target.style.zIndex="",null==e.interaction.dropElement){var n=e.target;n.removeAttribute("data-x"),n.removeAttribute("data-y"),n.style.transform="",n.parentElement!=t.dragContainer&&t.dragContainer.appendChild(n)}t.check_finish()}}).styleCursor(!1),(0,u["default"])(".folder_space").dropzone({overlap:.5,ondragenter:function(e){e.target.classList.add("drop-target")},ondragleave:function(e){e.target.classList.remove("drop-target")},ondrop:function(e){var n=e.target,r=n.getBoundingClientRect(),i=r.x,a=r.y,s=e.relatedTarget;s.style.top=a+"px",s.style.left=i+"px",s.style.transform="",n.childElementCount>0&&(0,c.to_array)(n.childNodes).forEach(function(e){t.dragContainer.appendChild(e)}),n.appendChild(s)},ondropdeactivate:function(e){var t=e.relatedTarget;t.removeAttribute("data-x"),t.removeAttribute("data-y"),t.style.transform=0,e.target.classList.remove("drop-target")}})}},{key:"check_finish",value:function(){if(0==this.dragContainer.childElementCount){var e=document.querySelectorAll(".draggable_folder"),t=(0,c.to_array)(e),n=t.reduce(function(e,t){var n=t.parentElement,r=n.getAttribute("data-type"),i=t.getAttribute("data-type");return r==i?e+1:e},0);9==n?this.showMessage("Richtig!"):this.showMessage("Leider falsch. Schau nochmal genau hin!")}}},{key:"showMessage",value:function(e){var t=this.messageBox;t.textContent=e,t.classList.add("active"),clearTimeout(this.messageBoxTimeout),this.messageBoxTimeout=setTimeout(function(){t.classList.remove("active")},5e3)}},{key:"fill_shelf_with_folders",value:function(e,t,n){var r=this,i=(0,c.range)(10),a=(0,c.range)(n).map(function(e){var t=Math.floor(Math.random()*i.length),n=i[t];i.splice(t,1);var r=i.indexOf(n-1);r>-1&&i.splice(r,1);var a=i.indexOf(n+1);return a>-1&&a<i.length&&i.splice(a,1),n});return(0,c.range)(10).reduce(function(n,i){if(a.indexOf(i)>-1){var s=(0,c.create_element)("div")["class"]("folder_space").attr("data-type",t+i).render();return e.appendChild(s),n.concat({number:i,color:t,drop_target:s})}return e.appendChild(r.create_folder(t,i)),n},[])}},{key:"create_draggable_folder",value:function(e,t,n){var r=this.create_folder(e,t);return r.classList.add("draggable_folder"),r}},{key:"create_folder",value:function(e,t){var n=this.folder_sprite_offset(e,t);return(0,c.create_element)("div")["class"]("folder").attr("data-type",e+t).style("background-position",n).render()}},{key:"folder_sprite_offset",value:function(e,t){var n={yellow:0,blue:33.3,green:66.6,red:100},r=11.1*t,i=n[e];return r+"% "+i+"%"}},{key:"cleanup",value:function(e){}}]),t}(f["default"]);e["default"]=h}),require.register("scenes/PapaScene.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);
}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(t("../utils"),t("./scene_manager")),u=(r(l),t("./Scene")),c=r(u),d=t("./Dialog"),f=r(d),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.part=e||"in",n}return s(t,e),o(t,[{key:"render",value:function(e){this.scene=e,e.classList.add("papa"),"in"==this.part?(this.create_in_dialog(),this.set_background("01")):(this.create_out_dialog(),this.set_background("03")),window.scene=this}},{key:"dialog_init",value:function(){return this.dialog=new f["default"],this.scene.appendChild(this.dialog.add_bubble("papa")),this.scene.appendChild(this.dialog.add_bubble("finn")),this.dialog}},{key:"create_in_dialog",value:function(){this.dialog_init()["let"]("finn").say("Hallo Papa!").wait(3e3)["let"]("papa").say("Hallo Finn, du kommst gerade richtig! Ich hab hier wieder ein paar Ordner, die einsortiert werden müssen. Das machst du doch so gerne, oder?").wait(9e3)["let"]("finn").say("Ja, das kann ich gut!").wait(3e3).play()}},{key:"create_out_dialog",value:function(){var e=this;e.dialog_init()["let"]("finn").say("Jetzt ist alles wieder aufgeräumt!").wait(3e3)["let"]("papa").say("Danke Finn, das sieht super aus!").wait(3e3)["let"]("finn").say("Du Papa… Lucy ist schon wieder weg. Hast du eine Idee, wo sie sein könnte?").wait(5e3)["let"]("papa").say("Hm… Das letzte Mal, als wir Lucy suchen mussten, war sie drüben auf Karls Hühnerhof. Hast du dort schon gesucht?").wait(6e3)["let"]("finn").say("Das ist eine gute Idee, da war ich noch nicht.").wait(4e3)["let"]("papa").say("Dann lauf mal schnell hin, wir sehen uns heute Abend!").wait(4e3)["let"]("finn").say("Okay, tschüss!").wait(2e3).play()}},{key:"set_background",value:function(e){this.scene.style.setProperty("background-image","url(img/papa_scene_"+e+".png)")}},{key:"cleanup",value:function(e){this.dialog&&this.dialog.stop().rewind()}}]),t}(c["default"]);e["default"]=h}),require.register("scenes/PrefaceScene.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(t("../utils"),t("./scene_manager")),u=(r(l),t("./Scene")),c=r(u),d=t("./Dialog"),f=r(d),h=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"render",value:function(e){this.scene=e,e.classList.add("preface"),this.create_in_dialog(),this.set_background("01"),window.scene=this}},{key:"create_in_dialog",value:function(){this.dialog=new f["default"],this.scene.appendChild(this.dialog.add_bubble("finn")),this.scene.appendChild(this.dialog.add_bubble("narrator")),this.dialog["let"]("narrator").say("Hallo Finn, was ist denn los? Warum bist du so traurig?").wait(6e4)["let"]("finn").say("Ich finde meine Katze Lucy nicht mehr. Ich habe mit ihr im Garten gespielt. Dann bin ich kurz ins Haus gegangen, um etwas zu trinken zu holen und als ich wieder in den Garten kam, war sie weg.").wait(6e4)["let"]("narrator").say("Oh, das ist schade. Hast du sie denn schon gesucht?").wait(6e4)["let"]("finn").say("Nein, alleine schaffe ich das nicht.").wait(6e4)["let"]("narrator").say("Das ist kein Problem. Ich hätte hier jemanden, der dir sicher gerne hilft").wait(6e4)["let"]("finn").say("Wirklich? Würdest du mir bei der Suche helfen? Das wäre super! Ich hole nur kurz meine Tasche und dann können wir los!").wait(6e4)["do"](function(){}).wait(3e3)["let"]("finn").say("Am besten gehen wir zuerst zu meinem Freund Emil, vielleicht hat er sie gesehen.").wait(6e4).play()}},{key:"set_background",value:function(e){this.scene.style.setProperty("background-image","url(img/preface_scene_"+e+".png)")}},{key:"cleanup",value:function(e){this.dialog&&this.dialog.stop().rewind()}}]),t}(c["default"]);e["default"]=h}),require.register("scenes/Scene.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,[{key:"render",value:function(e){}},{key:"clenaup",value:function(e){}}]),e}();e["default"]=a}),require.register("scenes/ShopGameScene.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=t("interactjs"),u=r(l),c=t("../utils"),d=t("./Scene"),f=r(d),h=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"render",value:function(e){this.scene=e,e.classList.add("shop_game"),e.appendChild(this.create_message_box()),e.appendChild(this.create_scale()),e.appendChild(this.create_source()),e.appendChild(this.create_finish_button()),this.shuffle_problems(),this.next_problem(),this.freeze=!1}},{key:"shuffle_problems",value:function(){var e=["apple","milk","butter"];this.problems=(0,c.shuffle)((0,c.range)(2,11)).map(function(t){return{sum:t,less:Math.floor(Math.random()*t),item:e[Math.floor(Math.random()*e.length)]}})}},{key:"next_problem",value:function(e){return this.problems.length>0?(this.problem&&(this.source.classList.remove("item_"+this.problem.item),this.source.removeChild(this.source.firstChild)),this.problem=this.problems.pop(),this.source.classList.add("item_"+this.problem.item),this.source.appendChild(this.create_item(this.problem.item)),this.reset_dishes(this.problem.sum,this.problem.less,this.problem.item),!0):(this.problem=void 0,this.show_message("Sehr gut! Du hast alle Aufgaben gelöst!"),!1)}},{key:"create_message_box",value:function(){var e=(0,c.create_element)("div")["class"]("message_box").render();return this.message_box=e,e}},{key:"show_message",value:function(e){var t=this.message_box;t.textContent=e,t.classList.add("active"),clearTimeout(this.message_box_timeout),this.message_box_timeout=setTimeout(function(){t.classList.remove("active")},3e3)}},{key:"check_finish",value:function(){var e=this,t=e.problem.sum,n=e.right_dish.childElementCount;t==n?(e.freeze=!0,e.show_message("Richtig!"),setTimeout(function(){e.next_problem()&&(e.freeze=!1)},3e3)):e.show_message("Leider falsch. Schau nochmal genau hin!")}},{key:"create_scale",value:function(){var e=this,t=(0,c.create_element)("div")["class"]("scale");return e.left_dish=(0,c.create_element)("div")["class"]("dish")["class"]("dish_left").attr("data-dish","left").render(),e.right_dish=(0,c.create_element)("div")["class"]("dish")["class"]("dish_right").attr("data-dish","right").render(),(0,u["default"])(e.right_dish).dropzone({ondragenter:function(t){e.freeze||t.target.classList.add("drop-target")},ondragleave:function(t){e.freeze||t.target.classList.remove("drop-target")},ondropdeactivate:function(t){e.freeze||t.target.classList.remove("drop-target")}}),t.adopt((0,c.create_element)("div")["class"]("lever").adopt((0,c.create_element)("div")["class"]("needle").render()).render()),t.adopt((0,c.create_element)("div")["class"]("pillar").render()),t.adopt(e.left_dish),t.adopt(e.right_dish),t.render()}},{key:"reset_dishes",value:function(e,t,n){for(var r=this;r.left_dish.firstChild;)r.left_dish.removeChild(r.left_dish.firstChild);for(;r.right_dish.firstChild;)r.right_dish.removeChild(r.right_dish.firstChild);(0,c.range)(e).forEach(function(e){r.left_dish.appendChild(r.create_item(n,!0))}),(0,c.range)(t).forEach(function(e){r.right_dish.appendChild(r.create_item(n))})}},{key:"create_source",value:function(){return this.source=(0,c.create_element)("div")["class"]("source")["class"]("item").attr("data-type","source").render(),this.source}},{key:"create_item",value:function(e,t){var n=this,r=(0,c.create_element)("div")["class"]("item")["class"]("item_"+e).attr("data-type",e).render();return!t&&(0,u["default"])(r).draggable({onstart:function(e){n.freeze},onmove:function(e){if(!n.freeze){var t=e.target,r=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,i=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.transform="translate("+r+"px, "+i+"px)",t.setAttribute("data-x",r),t.setAttribute("data-y",i)}},onend:function(e){if(!n.freeze){var t=e.target,r=e.interaction.dropElement,i=t.parentNode;if(null==r?i.removeChild(t):(t.removeAttribute("data-x"),t.removeAttribute("data-y"),t.style.removeProperty("transform"),r.appendChild(t)),i.getAttribute("data-type","source")){var a=n.create_item(t.getAttribute("data-type"));n.source.appendChild(a)}}}}).styleCursor(!1),r}},{key:"create_finish_button",value:function(){return(0,c.create_element)("button")["class"]("finish_button").text("Wiegen!").click(this.check_finish.bind(this)).render()}},{key:"cleanup",value:function(e){this.problem=void 0}}]),t}(f["default"]);e["default"]=h}),require.register("scenes/TreehouseGameScene.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=t("interactjs"),u=r(l),c=t("../utils"),d=t("./Scene"),f=r(d),h=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"render",value:function(e){this.scene=e,e.classList.add("treehouse_game"),e.appendChild(this.create_message_box()),e.appendChild(this.create_problem_field()),e.appendChild(this.create_toolbox()),e.appendChild(this.create_sink()),e.appendChild(this.create_finish_button()),this.shuffle_problems(),this.next_problem()}},{key:"shuffle_problems",value:function(){this.problems=(0,c.shuffle)((0,c.range)(2,11)),console.log(this.problems)}},{key:"next_problem",value:function(e){return this.problems.length>0?(this.problem=this.problems.pop(),this.problem_field.textContent="Suche "+this.problem+" Nägel",!0):(this.problem=void 0,this.problem_field.textContent="",this.show_message("Sehr gut! Du hast alle Aufgaben gelöst!"),!1)}},{key:"create_message_box",value:function(){var e=(0,c.create_element)("div")["class"]("message_box").render();return this.message_box=e,e}},{key:"show_message",value:function(e){var t=this.message_box;t.textContent=e,t.classList.add("active"),clearTimeout(this.message_box_timeout),this.message_box_timeout=setTimeout(function(){t.classList.remove("active")},3e3)}},{key:"check_finish",value:function(){var e=this,t=e.sink.childElementCount;t==e.problem?(e.freeze=!0,e.show_message("Richtig!"),setTimeout(function(){e.clear_sink(),e.next_problem()&&(e.freeze=!1)},3e3)):e.show_message("Leider falsch. Schau nochmal genau hin!")}},{key:"create_problem_field",value:function(){return this.problem_field=(0,c.create_element)("div")["class"]("problem_field").render(),this.problem_field}},{key:"create_toolbox",value:function(){var e=this,t=(0,c.create_element)("div")["class"]("toolbox").render();return(0,u["default"])(t).draggable({onstart:function(t){if(!e.freeze){var n=e.create_nail(),r=t.target.getBoundingClientRect();t.interaction.nail=n,t.target.appendChild(n);var i=n.getBoundingClientRect(),a=t.x0-r.x-i.width/2,s=t.y0-r.y-i.height/2;n.style.setProperty("left",a+"px"),n.style.setProperty("top",s+"px")}},onmove:function(t){if(!e.freeze){var n=t.interaction.nail,r=(parseFloat(n.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(n.getAttribute("data-y"))||0)+t.dy;n.style.transform="translate("+r+"px, "+i+"px)",n.setAttribute("data-x",r),n.setAttribute("data-y",i)}},onend:function(t){if(!e.freeze){var n=t.interaction.nail,r=t.interaction.dropElement;if(null==r)n.parentElement.removeChild(n);else{var i=r.getBoundingClientRect(),a=n.getBoundingClientRect(),s=.02*i.width,o=.02*i.height,l=.98*(i.width-a.width),u=.98*(i.height-a.height),c=a.x-i.x,d=a.y-i.y;c=Math.max(s,Math.min(c,l)),d=Math.max(o,Math.min(d,u)),n.removeAttribute("data-x"),n.removeAttribute("data-y"),n.style.removeProperty("transform"),n.style.setProperty("left",c+"px"),n.style.setProperty("top",d+"px"),r.appendChild(n),e.make_nail_draggable(n)}}}}).styleCursor(!1),t}},{key:"create_nail",value:function(){return(0,c.create_element)("div")["class"]("nail").render()}},{key:"make_nail_draggable",value:function(e){(0,u["default"])(e).draggable({onstart:function(e){self.freeze||e.target.parentElement.appendChild(e.target)},onmove:function(e){if(!self.freeze){var t=e.target,n=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,r=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.transform="translate("+n+"px, "+r+"px)",t.setAttribute("data-x",n),t.setAttribute("data-y",r)}},onend:function(e){if(!self.freeze){var t=e.target,n=e.interaction.dropElement;if(null!=n&&"sink"==n.getAttribute("data-type")){var r=n.getBoundingClientRect(),i=t.getBoundingClientRect(),a=.02*r.width,s=.02*r.height,o=.98*(r.width-i.width),l=.98*(r.height-i.height),u=i.x-r.x,c=i.y-r.y;u=Math.max(a,Math.min(u,o)),c=Math.max(s,Math.min(c,l)),t.removeAttribute("data-x"),t.removeAttribute("data-y"),t.style.removeProperty("transform"),t.style.setProperty("left",u+"px"),t.style.setProperty("top",c+"px")}else t.parentElement.removeChild(t)}}}).styleCursor(!1)}},{key:"create_sink",value:function(){var e=(0,c.create_element)("div")["class"]("sink").attr("data-type","sink").render();return this.sink=e,(0,u["default"])(e).dropzone({}),e}},{key:"clear_sink",value:function(){for(;this.sink.firstChild;)this.sink.removeChild(this.sink.firstChild)}},{key:"create_finish_button",value:function(){return(0,c.create_element)("button")["class"]("finish_button").text("Fertig, zählen!").click(this.check_finish.bind(this)).render()}},{key:"cleanup",value:function(e){}}]),t}(f["default"]);e["default"]=h}),require.register("scenes/scene_manager.js",function(e,t,n){"use strict";var r=t("../utils"),i=function(){return(0,r.create_element)("div")["class"]("scene").render()},a=function(){var e=i();u.parentNode.replaceChild(e,u),u=e},s=function(e,t){if(!t||!t.render||!t.cleanup)throw t+" is not a scene";c[e]=t},o=function(e){if(!(e in c))throw"Unknown scene '"+e+"'";var t=c[e];d&&d.cleanup&&d.cleanup(u),a(),t.render(u),d=t},l=function(){return u},u=i(),c={},d=void 0;n.exports={register:s,navigate:o,get_scene_element:l}}),require.register("utils.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;arguments.length<1?(t=0,e=0):null===t&&(t=e,e=0);for(var r=[];e!=t;)r.push(e),e+=n;return r}function a(e){for(var t=[],n=e.slice(0),r=void 0;n.length>0;)r=Math.floor(Math.random()*n.length),t.push(n.splice(r,1)[0]);return t}function s(e){return new d(e)}function o(e){return Array.prototype.slice.call(e)}function l(){for(var e=1;e<arguments.length;e++)if(arguments[e]!=u(arguments[0][e-1]))return!1;return!0}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.range=i,e.shuffle=a,e.create_element=s,e.to_array=o,e.check_args=l;var d=function(){function e(t){r(this,e),this.el=document.createElement(t)}return c(e,[{key:"class",value:function(e){return this.el.classList.add(e),this}},{key:"id",value:function(e){return this.el.setAttribute("id",e),this}},{key:"attr",value:function(e,t){return this.el.setAttribute(e,t),this}},{key:"style",value:function(e,t){return this.el.style.setProperty(e,t),this}},{key:"text",value:function(e){return this.el.textContent=e,this}},{key:"adopt",value:function(e){return this.el.appendChild(e),this}},{key:"click",value:function(e){return this.el.addEventListener("click",e),this}},{key:"render",value:function(){return this.el}}]),e}()}),require.register("___globals___",function(e,t,n){})}(),require("___globals___");